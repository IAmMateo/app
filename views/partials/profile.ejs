<section class="profile-page animated fadeIn">
	<div class="profile-user clearfix" ng-if="profile">
		<div class="left profile-info">
			<img ng-src="{{profile.avatar}}" class="avatar left" ng-click="switchList('favorites')" avatar-load>

			<div class="left">
				<div class="name truncate" ng-click="switchList('favorites')">{{profile.displayName || profile.name}}</div>
			</div>
		</div>

		<div class="profile-stat right">
			<ul>
				<li class="stat-block following" ng-class="{'active': list==='ownCollections'}">
					<a href="" class="mask-link" ng-click="switchList('ownCollections')"></a>
					<div class="stat-count">
						{{kFormat(profileCollections.length) || 0}}
					</div>
					<div class="stat-title">
						curated
					</div>
				</li>
				<li class="stat-block followers" ng-class="{'active': list==='followCollections'}">
					<a href="" class="mask-link" ng-click="switchList('followCollections')"></a>
					<div class="stat-count">
						{{kFormat(profile.followCollections.length) || 0}}
					</div>
					<div class="stat-title">
						followed
					</div>
				</li>
			</ul>
		</div>
	</div>

	<div class="profile-lists animated fadeInDown delay-300ms">
		<h2 class="list-title" ng-if="profileCollections.length || followCollections.length">
			<span ng-if="list === 'ownCollections'">{{profile.displayName || profile.name}}'s collections:</span>
			<span ng-if="list === 'followCollections'">{{profile.displayName || profile.name}} follows:</span>
		</h2>

		<ul class="profile-collections" ng-if="profileCollections.length && list === 'ownCollections'">
			<li class="coll-item coll{{$index}} clearfix"
				ng-repeat="coll in profileCollections"
				ng-class="{last: $last}">

				<a ng-if="!me" ng-href="/u/{{profile.name}}/{{coll._id}}" class="mask-link"></a>

				<div class="coll-book clearfix">
					<div class="coll-info left">
						<h1 class="title">{{coll.title}}</h1>
						<div class="desc" ng-if="coll.description">{{coll.description}}</div>
						<div class="stat">
							<span class="followers" tooltip="Followers"><i class="font-icon people-icon icon"></i> {{kFormat(coll.followers.length) || 0}}</span>
							<span class="documents" tooltip="Documents"><i class="font-icon doc-icon icon"></i> {{kFormat(coll.count) || 0}}</span>
						</div>
					</div>

					<div class="profile-action right" ng-if="me">
						<a ng-href="/collections/{{coll._id}}" class="btn small-btn blue-btn edit-btn">Edit</a>
					</div>

					<div class="profile-action right" ng-if="!me">
						<button type="button" class="btn small-btn green-btn follow-btn" ng-if="!coll.mutual && !coll.processing" ng-click="followCollection(coll._id, $index)">Follow</button>
						<button type="button" class="btn small-btn pink-btn following-btn" ng-if="coll.mutual && !coll.processing" ng-click="unfollowCollection(coll._id, $index)">Unfollow</button>
					</div>
				</div>
				<ul class="backlists"><li></li><li></li></ul>
			</li>
		</ul>

		<ul class="profile-collections" ng-if="followCollections.length && list === 'followCollections'">
			<li class="coll-item coll{{$index}} clearfix"
				ng-repeat="coll in followCollections"
				ng-class="{last: $last}">

				<a ng-href="/u/{{coll.userData.name}}/{{coll._id}}" class="mask-link"></a>

				<div class="coll-book clearfix">
					<div class="coll-info left">
						<div class="author">
							<img ng-src="{{coll.userData.avatar}}" class="avatar" avatar-load>
							<div class="curated truncate">
								<span>curated</span> by <a ng-href="/u/{{coll.userData.name}}">{{coll.userData.name}}</a>
							</div>
						</div>
						<h1 class="title">{{coll.title}}</h1>
						<div class="desc" ng-if="coll.description">{{coll.description}}</div>
						<div class="stat">
							<span class="followers" tooltip="Followers"><i class="font-icon people-icon icon"></i> {{kFormat(coll.followers.length) || 0}}</span>
							<span class="documents" tooltip="Documents"><i class="font-icon doc-icon icon"></i> {{kFormat(coll.count) || 0}}</span>
						</div>
					</div>

					<div class="profile-action right">
						<button type="button" class="btn small-btn green-btn follow-btn" ng-if="!coll.mutual && !coll.processing" ng-click="followCollection(coll._id, $index)">Follow</button>
						<button type="button" class="btn small-btn pink-btn following-btn" ng-if="coll.mutual && !coll.processing" ng-click="unfollowCollection(coll._id, $index)">Unfollow</button>
					</div>
				</div>
				<ul class="backlists"><li></li><li></li></ul>
			</li>
		</ul>
	</div>

	<div class="two-spin" ng-hide="loaded || error"></div>
</section>
